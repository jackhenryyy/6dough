<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>6Dough • Papa Johns Mini Pet</title>
  <style>
    :root{
      --pj-red:#D71F27; /* Papa Johns red */
      --pj-green:#007A33; /* Papa Johns green */
      --bg:#0f1115;
      --panel:#161a22;
      --text:#e8eefc;
      --muted:#98a2b3;
      --good:#25c26e;
      --warn:#f59e0b;
      --bad:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:linear-gradient(180deg,#0c1016,#0b0d12 60%,#0e1118);color:var(--text);font:14px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
    a{color:var(--pj-green)}
    .wrap{max-width:1100px;margin:0 auto;padding:16px 16px 80px;}
    header{display:flex;align-items:center;gap:14px;margin:10px 0 16px;}
    .logo{width:38px;height:38px;border-radius:10px;background:radial-gradient(circle at 30% 30%,#fff6d5 0 38%,#f2d39b 40%,#b38447 70%,#4a2f15 100%);box-shadow:0 0 0 2px #fff3 inset,0 6px 20px #0008;}
    h1{font-size:20px;margin:0;letter-spacing:.2px}
    .subtitle{color:var(--muted);font-size:12.5px}

    .grid{display:grid;grid-template-columns:340px 1fr;gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:var(--panel);border:1px solid #202637;border-radius:16px;box-shadow:0 20px 40px #0006;}
    .pad{padding:14px}

    /* Canvas panel */
    #stageWrap{position:relative}
    #stage{width:100%;aspect-ratio:1/1;border-radius:14px;background:linear-gradient(180deg,#19202b,#0f1520 65%,#0a0d13);border:1px solid #243044;display:block}
    .hud{position:absolute;inset:10px auto auto 10px;display:flex;gap:8px;}
    .tag{background:#0b111a;border:1px solid #1e2735;color:#bcd1ff;padding:4px 8px;border-radius:999px;font-weight:600;font-size:12px}

    /* Controls */
    .controls{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .btn{appearance:none;border:1px solid #223047;background:#0f1520;color:var(--text);padding:10px 12px;border-radius:12px;cursor:pointer;font-weight:700;letter-spacing:.2px;transition:.12s transform ease, .12s background ease;box-shadow:0 6px 16px #0007}
    .btn:hover{transform:translateY(-1px);background:#121a29}
    .btn:active{transform:translateY(1px)}
    .btn.ing{display:flex;align-items:center;gap:8px}
    .dot{width:10px;height:10px;border-radius:50%}
    .flour{background:#fff}
    .water{background:#67b7ff}
    .salt{background:#d9e3ff}
    .sugar{background:#ffe079}
    .oil{background:#ffd25a}
    .yeast{background:#f2a46b}

    .statbar{display:grid;grid-template-columns:100px 1fr 40px;align-items:center;gap:10px;margin:6px 0}
    .bar{height:8px;background:#0b111a;border:1px solid #1e2735;border-radius:999px;overflow:hidden}
    .bar>i{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--pj-green),#42b883)}
    .pct{font-variant-numeric:tabular-nums;color:#c9d7ff}

    .panelTitle{font-weight:800;margin:0 0 8px 2px;color:#eaf1ff}
    .note{color:var(--muted);font-size:12.2px}
    .divider{height:1px;background:#202636;margin:10px 0}
    .pill{display:inline-block;background:#0d131d;border:1px solid #1f2937;border-radius:999px;padding:6px 10px;font-weight:700}
    .pill.good{border-color:#194f34;color:#9af0c2}
    .pill.bad{border-color:#4f1919;color:#ffb4b4}

    /* Footer */
    footer{position:fixed;inset:auto 0 0 0;background:linear-gradient(180deg,#0f1115,#0b0d12);border-top:1px solid #1a2130;padding:8px 16px;display:flex;align-items:center;justify-content:space-between;gap:10px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;background:#0f1520;border:1px solid #1f2a3e;border-bottom-width:3px;border-radius:8px;padding:4px 8px;color:#cde1ff}
    .brand{display:flex;gap:8px;align-items:center}
    .pj{font-weight:900;color:var(--pj-red)}

    /* Toast */
    .toast{position:fixed;right:14px;bottom:70px;background:#0f1520;border:1px solid #203044;padding:10px 12px;border-radius:12px;box-shadow:0 10px 30px #0008;opacity:0;transform:translateY(10px);transition:.15s}
    .toast.show{opacity:1;transform:translateY(0)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo" aria-hidden></div>
      <div>
        <h1>6Dough — your tiny pizza pal</h1>
        <div class="subtitle">Keep your dough ball happy, mix Papa Johns’ <b>Six Simple Ingredients</b>, grow big, and peel off pieces to bake pizzas. Make <b>10 pizzas</b> → earn <span style="color:var(--pj-green);font-weight:800">$1 in rewards*</span>.</div>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: Pet & canvas -->
      <div class="card pad" id="stageWrap">
        <canvas id="stage" width="640" height="640" aria-label="6Dough game canvas"></canvas>
        <div class="hud">
          <span class="tag">Day <span id="day">1</span></span>
          <span class="tag">Pizzas: <span id="pizzas">0</span>/10</span>
          <span class="tag">Size: <span id="size">1</span></span>
        </div>
      </div>

      <!-- RIGHT: Controls & stats -->
      <div class="card pad">
        <h3 class="panelTitle">Stats</h3>
        <div class="statbar"><span>Hunger</span><div class="bar"><i id="bHunger"></i></div><span class="pct" id="pHunger">0%</span></div>
        <div class="statbar"><span>Energy</span><div class="bar"><i id="bEnergy"></i></div><span class="pct" id="pEnergy">0%</span></div>
        <div class="statbar"><span>Cleanliness</span><div class="bar"><i id="bClean"></i></div><span class="pct" id="pClean">0%</span></div>
        <div class="statbar"><span>Mood</span><div class="bar"><i id="bMood"></i></div><span class="pct" id="pMood">0%</span></div>
        <div class="divider"></div>
        <div class="note">Tip: Mix <b>one of each ingredient</b> to complete a dough batch. Each full batch grows 6Dough. Keep mood, energy, and cleanliness up so growth isn’t slowed.</div>
        <div class="divider"></div>
        <h3 class="panelTitle">Feed Ingredients</h3>
        <div class="controls" id="feeders"></div>
        <div class="divider"></div>
        <h3 class="panelTitle">Care</h3>
        <div class="controls">
          <button class="btn" id="btnPlay">Play (boost mood)</button>
          <button class="btn" id="btnRest">Rest (restore energy)</button>
          <button class="btn" id="btnClean">Clean (wash off flour)</button>
        </div>
        <div class="divider"></div>
        <h3 class="panelTitle">Bake</h3>
        <div class="controls">
          <button class="btn" id="btnBake" disabled>Make Pizza (−10 size)</button>
          <button class="btn" id="btnReset">Reset Save</button>
        </div>
        <p class="note">*Rewards shown here are for demo purposes only, not connected to a live account.</p>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <footer>
    <div class="brand"><span class="pj">PAPA JOHNS</span> • 6 Simple Ingredients demo</div>
    <div>Save: <span class="kbd">auto</span> · Pause/Resume: <span class="kbd">Space</span></div>
  </footer>

<script>
(function(){
  // --- Game State ---
  const SAVE_KEY = 'sixdough_v1';
  const baseState = {
    day:1, ticks:0, paused:false,
    size:1, // grows with batches, pizza costs 10
    pizzas:0,
    hunger:60, energy:80, clean:80, mood:80, // 0..100
    mix:{flour:0, salt:0, sugar:0, water:0, oil:0, yeast:0},
    blink:0,
  };
  let S = load() || baseState;

  // --- DOM refs ---
  const el = q=>document.querySelector(q);
  const stage = el('#stage');
  const ctx = stage.getContext('2d');
  const tDay = el('#day');
  const tPizzas = el('#pizzas');
  const tSize = el('#size');
  const bars = {
    hunger: [el('#bHunger'), el('#pHunger')],
    energy: [el('#bEnergy'), el('#pEnergy')],
    clean:  [el('#bClean'),  el('#pClean')],
    mood:   [el('#bMood'),   el('#pMood')],
  };
  const feeders = el('#feeders');
  const toast = el('#toast');
  const btnBake = el('#btnBake');

  // --- Ingredient buttons ---
  const ING = [
    {key:'flour', label:'Flour', cls:'flour', effect:s=>{ s.hunger+=8; s.clean-=2; s.mix.flour++; }},
    {key:'water', label:'Water', cls:'water', effect:s=>{ s.hunger+=4; s.clean+=6; s.mix.water++; }},
    {key:'salt',  label:'Salt',  cls:'salt',  effect:s=>{ s.hunger+=3; s.energy-=2; s.mix.salt++; }},
    {key:'sugar', label:'Sugar', cls:'sugar', effect:s=>{ s.hunger+=5; s.energy+=6; s.mix.sugar++; }},
    {key:'oil',   label:'Oil',   cls:'oil',   effect:s=>{ s.hunger+=5; s.energy+=3; s.clean-=3; s.mix.oil++; }},
    {key:'yeast', label:'Yeast', cls:'yeast', effect:s=>{ s.hunger+=4; s.mood+=4; s.mix.yeast++; }},
  ];
  ING.forEach(({key,label,cls,effect})=>{
    const b=document.createElement('button');
    b.className='btn ing';
    b.innerHTML=`<span class="dot ${cls}"></span>${label}`;
    b.addEventListener('click',()=>{
      if(S.paused) return nudge('Game is paused');
      effect(S);
      clampStats();
      checkBatch();
      save();
      ui();
      nudge(`${label} added`);
    });
    feeders.appendChild(b);
  });

  // --- Care controls ---
  el('#btnPlay').onclick=()=>{ if(S.paused) return; S.mood+=12; S.energy-=4; clampStats(); ui(); save(); nudge('You played with 6Dough 😊'); };
  el('#btnRest').onclick=()=>{ if(S.paused) return; S.energy+=16; S.mood+=2; S.hunger-=6; clampStats(); ui(); save(); nudge('6Dough took a power nap 😴'); };
  el('#btnClean').onclick=()=>{ if(S.paused) return; S.clean+=18; S.mood+=2; clampStats(); ui(); save(); nudge('Sparkly clean 🫧'); };
  el('#btnReset').onclick=()=>{ if(confirm('Reset your 6Dough save?')){ S={...baseState}; save(); ui(); draw(); nudge('Save reset.'); }};
  btnBake.onclick=()=>{
    if(S.paused) return;
    if(S.size>=11){ S.size-=10; S.pizzas++; if(S.pizzas%10===0) nudge('Reward unlocked: $1 in demo points!'); else nudge('Pizza baked! 🍕'); save(); ui(); draw(); }
  };

  // --- Keyboard ---
  window.addEventListener('keydown',e=>{
    if(e.code==='Space'){ S.paused=!S.paused; nudge(S.paused?'Paused ⏸':'Resumed ▶'); }
  });

  // --- Helpers ---
  function clamp(v,min=0,max=100){ return Math.max(min,Math.min(max,v)); }
  function clampStats(){
    S.hunger=clamp(S.hunger); S.energy=clamp(S.energy); S.clean=clamp(S.clean); S.mood=clamp(S.mood);
  }
  function save(){ localStorage.setItem(SAVE_KEY, JSON.stringify(S)); }
  function load(){ try{ return JSON.parse(localStorage.getItem(SAVE_KEY)); }catch{return null} }
  function nudge(msg){ toast.textContent=msg; toast.classList.add('show'); clearTimeout(nudge._t); nudge._t=setTimeout(()=>toast.classList.remove('show'),1400); }

  // --- Dough Batch Logic ---
  function checkBatch(){
    const m=S.mix;
    const complete = ['flour','salt','sugar','water','oil','yeast'].every(k=>m[k]>0);
    if(complete){
      const careMultiplier = (0.5 + (S.mood+S.energy+S.clean)/300); // 0.5..1.5
      const grow = Math.round(4 * careMultiplier);
      S.size += grow;
      // spend one unit of each
      Object.keys(m).forEach(k=>m[k]=Math.max(0,m[k]-1));
      S.hunger = clamp(S.hunger-10);
      nudge(`Batch mixed! 6Dough grew by +${grow}`);
    }
  }

  // --- Simulation tick ---
  let last = performance.now();
  function tick(ts){
    const dt = ts-last; last=ts;
    // advance every 1s
    if(!S.paused){
      S.ticks += dt;
      if(S.ticks>=1000){
        const steps = Math.floor(S.ticks/1000); // in seconds
        S.ticks -= steps*1000;
        for(let i=0;i<steps;i++) step();
        draw();
        ui();
        save();
      }
    }
    requestAnimationFrame(tick);
  }

  function step(){
    // basic needs drift
    S.hunger = clamp(S.hunger-1);
    S.energy = clamp(S.energy-1);
    S.clean  = clamp(S.clean - (S.hunger<30?2:1));

    // mood follows other stats
    const avg = (S.hunger+S.energy+S.clean)/3;
    S.mood = clamp(S.mood + (avg>70?+2:(avg<30?-2:0)));

    // penalties: if very low care, decay size slightly
    if(S.hunger<10 || S.energy<10 || S.clean<10){ S.size = Math.max(1, S.size-1); }

    // blink cycle
    S.blink = (S.blink+1)%8;

    // day counter
    if((S.ticks/1000|0)%60===0) S.day = Math.max(1, S.day);
  }

  // --- UI update ---
  function barSet(which,val){ const [b,p]=bars[which]; b.style.width=val+'%'; p.textContent=val+'%'; if(val<30) b.style.background='linear-gradient(90deg,var(--bad),#f87171)'; else if(val<60) b.style.background='linear-gradient(90deg,var(--warn),#fbbf24)'; else b.style.background='linear-gradient(90deg,var(--pj-green),#42b883)'; }
  function ui(){
    tDay.textContent = S.day;
    tPizzas.textContent = S.pizzas;
    tSize.textContent = S.size;
    barSet('hunger',S.hunger);
    barSet('energy',S.energy);
    barSet('clean', S.clean);
    barSet('mood',  S.mood);
    btnBake.disabled = S.size<11;
  }

  // --- Render 6Dough ---
  function draw(){
    const w=stage.width, h=stage.height;
    ctx.clearRect(0,0,w,h);

    // background vignette
    const g=ctx.createRadialGradient(w/2,h/2,80,w/2,h/2,420);
    g.addColorStop(0,'#162031'); g.addColorStop(1,'#0a0f18');
    ctx.fillStyle=g; ctx.fillRect(0,0,w,h);

    // ground shadow
    ctx.fillStyle='rgba(0,0,0,0.3)';
    const shR = 80 + S.size*1.2; // shadow width
    ctx.beginPath(); ctx.ellipse(w/2,h*0.75, shR, shR*0.18, 0, 0, Math.PI*2); ctx.fill();

    // dough body (pixelly blob via circles)
    const R = 60 + S.size*1.5; // main radius
    const cx=w/2, cy=h*0.55;
    const baseGrad = ctx.createRadialGradient(cx-R*0.3, cy-R*0.3, R*0.3, cx, cy, R);
    baseGrad.addColorStop(0,'#fff5d6');
    baseGrad.addColorStop(0.6,'#f2d39b');
    baseGrad.addColorStop(1,'#b68a51');
    ctx.fillStyle=baseGrad;
    roundedBlob(cx,cy,R,0.16);

    // facial features
    const eyeY = cy- R*0.18;
    const eyeX = 24 + S.size*0.2;
    const blink = (S.blink===0);
    drawEye(cx-eyeX,eyeY,blink);
    drawEye(cx+eyeX,eyeY,blink);

    // cute mouth
    ctx.strokeStyle='#3b2b14'; ctx.lineWidth=4; ctx.lineCap='round';
    ctx.beginPath(); ctx.arc(cx, eyeY+18, 10, 0, Math.PI, false); ctx.stroke();

    // flour dust if not clean
    if(S.clean<60){
      ctx.fillStyle='rgba(255,255,255,0.6)';
      for(let i=0;i<Math.floor((60-S.clean)/6);i++) ctx.fillRect(cx-R+Math.random()*R*2, cy-R+Math.random()*R*2, 6,6);
    }

    // status bubbles
    statusBubble(cx-R*0.9, cy-R*0.7, '⚡', S.energy);
    statusBubble(cx+R*0.9, cy-R*0.7, '😊', S.mood);
  }

  function roundedBlob(x,y,R,noise){
    ctx.beginPath();
    const k=16;
    for(let i=0;i<=k;i++){
      const ang=i/k*Math.PI*2; const r=R*(1+ (Math.sin(i*1.7)+Math.cos(i*2.3))*0.02*noise);
      const px=x+Math.cos(ang)*r, py=y+Math.sin(ang)*r;
      if(i===0) ctx.moveTo(px,py); else ctx.lineTo(px,py);
    }
    ctx.closePath(); ctx.fill();
    // highlight
    ctx.fillStyle='rgba(255,255,255,0.25)';
    ctx.beginPath(); ctx.arc(x-R*0.4,y-R*0.4,R*0.35,0,Math.PI*2); ctx.fill();
  }

  function drawEye(x,y,blink){
    ctx.fillStyle='#22160f';
    if(blink){ ctx.fillRect(x-8,y-2,16,4); return; }
    ctx.beginPath(); ctx.arc(x,y,10,0,Math.PI*2); ctx.fill();
    ctx.fillStyle='#fff'; ctx.beginPath(); ctx.arc(x-3,y-3,4,0,Math.PI*2); ctx.fill();
  }

  function statusBubble(x,y,emoji,val){
    ctx.save();
    ctx.translate(x,y);
    ctx.fillStyle='rgba(0,0,0,0.35)'; ctx.beginPath(); ctx.roundRect(-30,-20,60,40,10); ctx.fill();
    ctx.fillStyle= val<30?'#ef4444':(val<60?'#f59e0b':'#25c26e');
    ctx.font='22px system-ui'; ctx.textAlign='center'; ctx.textBaseline='middle';
    ctx.fillText(emoji,0,0);
    ctx.restore();
  }

  // --- Boot ---
  ui();
  draw();
  requestAnimationFrame(tick);
})();
</script>
</body>
</html>